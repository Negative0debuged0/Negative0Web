<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Your CSS styles here */
    </style>
</head>
<body>
    <div class="admin-panel">
        <h2>Admin Panel</h2>

        <div class="panel-section">
            <h3>User Information</h3>
            <p>View information about website users.</p>
            <table class="user-info-table">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Username</th>
                        <th>Operating System</th>
                        <th>Browser</th>
                        <th>Language</th>
                        <th>Device Type</th>
                        <th>Screen Resolution</th>
                        <th>Referrer URL</th>
                        <th>Session Duration</th>
                        <th>User Actions</th>
                        <th>Visit Time</th>
                        <th>IP Address</th>
                    </tr>
                </thead>
                <tbody id="user-info-body">
                    <!-- User data will be dynamically populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Function to get user information
        async function getUserInfo() {
            try {
                // Get user agent information
                const userAgent = navigator.userAgent;
                const os = getOS(userAgent);
                const browser = getBrowser(userAgent);
                const language = navigator.language;
                const deviceType = getDeviceType();
                const screenResolution = `${window.screen.width}x${window.screen.height}`;
                const referrerURL = document.referrer;
                const visitTime = new Date().toLocaleString();

                // Get IP address using an API
                const ipAddressResponse = await fetch('https://api64.ipify.org?format=json');
                const ipAddressData = await ipAddressResponse.json();
                const ipAddress = ipAddressData.ip;

                // Generate random username for demonstration
                const username = `User${Math.floor(Math.random() * 1000)}`;
                // Generate random session duration for demonstration (in minutes)
                const sessionDuration = Math.floor(Math.random() * 60) + 1;
                // Random user actions for demonstration
                const userActions = ['Clicked on homepage', 'Visited about page', 'Submitted contact form'];

                return { username, os, browser, language, deviceType, screenResolution, referrerURL, sessionDuration, userActions, visitTime, ipAddress };
            } catch (error) {
                console.error('Error fetching user information:', error);
                return null;
            }
        }

        // Function to get operating system from user agent
        function getOS(userAgent) {
            let os = "Unknown";
            if (userAgent.match(/Windows/i)) {
                os = "Windows";
            } else if (userAgent.match(/Macintosh/i)) {
                os = "macOS";
            } else if (userAgent.match(/Linux/i)) {
                os = "Linux";
            }
            return os;
        }

        // Function to get browser from user agent
        function getBrowser(userAgent) {
            let browser = "Unknown";
            if (userAgent.match(/Firefox/i)) {
                browser = "Firefox";
            } else if (userAgent.match(/Chrome/i)) {
                browser = "Chrome";
            } else if (userAgent.match(/Safari/i)) {
                browser = "Safari";
            } else if (userAgent.match(/Opera|OPR\//i)) {
                browser = "Opera";
            } else if (userAgent.match(/Trident/i) || userAgent.match(/MSIE/i)) {
                browser = "Internet Explorer";
            }
            return browser;
        }

        // Function to get device type
        function getDeviceType() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop';
        }

        // Function to display user information in table
        async function displayUserInfo() {
            const userInfo = await getUserInfo();
            if (userInfo) {
                const userInfoBody = document.getElementById('user-info-body');
                const newRow = userInfoBody.insertRow();

                newRow.innerHTML = `
                    <td>${Math.floor(Math.random() * 1000)}</td>
                    <td>${userInfo.username}</td>
                    <td>${userInfo.os}</td>
                    <td>${userInfo.browser}</td>
                    <td>${userInfo.language}</td>
                    <td>${userInfo.deviceType}</td>
                    <td>${userInfo.screenResolution}</td>
                    <td>${userInfo.referrerURL}</td>
                    <td>${userInfo.sessionDuration} mins</td>
                    <td>${userInfo.userActions.join('<br>')}</td>
                    <td>${userInfo.visitTime}</td>
                    <td>${userInfo.ipAddress}</td>
                `;
            } else {
                console.error('User information is null.');
            }
        }

        // Call function to display user information
        displayUserInfo();
    </script>
</body>
</html>

